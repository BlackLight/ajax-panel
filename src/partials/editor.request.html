<div class="editor-row">
	<div class="section gf-form-group" style="width:100%;">
		<h5 class="section-heading">HTTP Request</h5>
		<div class="gf-form">
			<gf-form-switch class="gf-form-inline" label="Data Source" label-class="width-7" checked="ctrl.panel.useDatasource" on-change="ctrl.datasourceChanged(null)"></gf-form-switch>
			<div class="gf-form">
				<gf-form-dropdown
					ng-show="ctrl.panel.useDatasource"
					model="ctrl.panel.datasource"
					css-class="gf-size-auto"
					lookup-text="true"
					get-options="ctrl.getDatasourceOptions()"
					on-change="ctrl.datasourceChanged($option)">
				</gf-form-dropdown>
			</div> &nbsp;
			<span ng-hide="ctrl.panel.useDatasource">Use a data source to supports advanced authentication or proxy</span>
		    <span ng-show="ctrl.panel.useDatasource" class="small-link">
			  <span ng-show="ctrl.dsInfo.isProxy" class="label label-tag">Proxy</span>
			  <span ng-show="ctrl.dsInfo.basicAuth" class="label label-tag">Basic Auth</span>
			  <span ng-show="ctrl.dsInfo.withCredentials" class="label label-tag">Use Credentials</span>
			  <a ng-href="{{ ctrl.dsInfo.baseURL }}" target="_blank">{{ ctrl.dsInfo.baseURL }} &nbsp; <i class="fa fa-external-link"></i></a>
			</span>
		</div>
		<div class="gf-form">
			<span class="gf-form-label width-7">{{ ctrl.panel.useDatasource ? 'Path' : 'URL' }}</span>
			<input type="text" class="input-large gf-form-input" placeholder="URL" ng-model="ctrl.panel.url" ng-change="ctrl.onConfigChanged()" ng-model-onblur />
		</div>
		<div class="gf-form">
			<span class="gf-form-label width-7">Method</span>
			<div class="gf-form-select-wrapper width-9">
		    <select class="gf-form-input" ng-model="ctrl.panel.method" ng-options="t for t in ['GET', 'POST', 'iframe']" ng-change="ctrl.onConfigChanged()"></select>
			</div>
		</div>
		<div ng-if="ctrl.panel.method !== 'iframe'">
			<div class="gf-form" >
				<span class="gf-form-label width-7">Response</span>
				<div class="gf-form-select-wrapper width-9">
					<select class="gf-form-input" ng-model="ctrl.panel.responseType" ng-change="ctrl.onConfigChanged()">
						<option value="text">Text</option>
						<option value="blob">Blob</option>
						<option value="document">Document</option>
						<option value="json">JSON</option>
						<option value="arraybuffer">Array Buffer  (for images)</option>
					</select>
				</div>
				<span><a href="https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/responseType" target="_blank"><i class="fa fa-question-circle"></i></a></span>
			</div>
			<gf-form-switch 
				class="gf-form" 
				label="Credentials" 
				label-class="width-7" 
				checked="ctrl.panel.withCredentials" 
				on-change="ctrl.onConfigChanged()"></gf-form-switch>
		</div>
		<gf-form-switch 
			class="gf-form" 
			label="Skip Same URL" 
			label-class="width-7" 
			checked="ctrl.panel.skipSameURL" 
			on-change="ctrl.onConfigChanged()"></gf-form-switch>
	</div>

	

	<div class="section gf-form-group small-link" style="width:100%;">
		<h5 class="section-heading">Parameters (via javascript)</h5>
		<div class="gf-form-inline">
			<div class="gf-form gf-form--grow">
				<code-editor
					content="ctrl.panel.params_js"
					on-change="ctrl.updateFN()"
					data-mode="javascript"
					data-behaviours-enabled="true"
					data-snippets-enabled="false"
					data-max-lines="20" >
				</code-editor>
			</div>
		</div>
		<a ng-href="{{ ctrl.lastURL }}" target="_blank">{{ ctrl.lastURL }} &nbsp; <i class="fa fa-external-link"></i></a>
	</div>

	<div class="section gf-form-group" style="width:100%;" ng-hide="ctrl.panel.method == 'iframe'">
		<h5 class="section-heading">Headers (via javascript)</h5>
		<div class="gf-form-inline">
			<div class="gf-form gf-form--grow">
				<code-editor
					content="ctrl.panel.header_js"
					on-change="ctrl.updateFN()"
					data-mode="javascript"
					data-behaviours-enabled="true"
					data-snippets-enabled="false"
					data-max-lines="20" >
				</code-editor>
			</div>
		</div>
	</div>
</div>

<div class="editor-row">
	<div class="section gf-form-group" style="width:100%;">
		<h5 class="section-heading">Configuration Examples</h5>
		<div class="dashlist">
			<div class="dashlist-section">
				<div class="dashlist-item" ng-repeat="example in ctrl.getStaticExamples()">
				<a class="dashlist-link" 
					ng-click="ctrl.loadExample(example, $event);" href="#">
					<span class="dashlist-title">
						{{example.name}}
					</span>
					<span class="pluginlist-version">
						{{example.text}}
					</span>
				</a>
			</div>
		</div>
	</div>
</div>

<br/>
<span class="small">
  Request Count: {{ ctrl.requestCount }}<br/>
</span>
